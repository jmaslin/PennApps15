<!DOCTYPE html>

<html lang="en">
	<head>
		<title>Trip</title>
		<!-- CSS -->
		<link href="/public/components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" media="screen">
		<link href="/public/components/fullcalendar/dist/fullcalendar.min.css" rel="stylesheet" media="screen">

		<link href="/public/trip.css" rel="stylesheet" media="screen">
		<!-- JS -->
		<script src="/public/components/jquery/dist/jquery.min.js"></script>
		<script src="/public/components/bootstrap/dist/js/bootstrap.min.js"></script>
		<script src="/public/components/moment/min/moment.min.js"></script>
		<script src="/public/components/fullcalendar/dist/fullcalendar.min.js"></script>

		<meta http-equiv="X-UA-Compatible" content="IE=edge"> 
	</head>
	<body>

<!-- 		<div id="overlayContainer" class="container-fluid">
			<div class="row">
				<div class="col-sm-8 col-sm-offset-4">
					<h1>OVERLAY TESTING</h1>
				</div>
			</div>
		</div> -->

		<div id="pageMain" class="container-fluid">
			<!-- TOP START -->

			<!-- TOP END -->

			<!-- BODY START -->
			<div class="row">

				<!-- SIDE START -->
				<div id="tripSide" class="col-sm-4">

					<div id="top" class="row">
						<div class="col-sm-12">
							<h2>
								<span id="beginMessage">Have fun on your trip to </span>
								<span class="text-primary" id="tripDestination">New York City</span>!
							</h2>
							<p class="lead">
								<span id="startTextDates">You leave on</span>  
								<!-- <button type="button" class="btn btn-info" data-container="body" data-toggle="popover" data-placement="bottom" data-trigger="manual" title="Calendar"> --><span id="tripFromDate" class="text-info">Friday, January 20th 2015</span><!-- </button> -->
								<span id="midTextDates">and return</span> 
								<!-- <button type="button" class="btn btn-info" data-container="body" data-toggle="popover" data-placement="bottom" data-trigger="manual" title="Calendar"> --><span id="tripToDate" class="text-info">Sunday, January 27th 2015</span><!-- </button> -->.
							</p>
							<!-- <a href="/"><button type="button" class="btn btn-sm btn-info">Back</button></a> -->
						</div>
					</div>

					<div id="tripSideTop" class="row">
						<div class="col-sm-12">
							<h3><strong>Itinerary</strong>
								<button data-toggle="modal" href="#editTripModal" class="btn btn-sm btn-warning">Edit Trip Details</button>
							</h3>
						</div>
					</div>

					<div class="row tripDay col-sm-12">
						<h4><hr><span class="tripDayTitle">Friday, January 20th 2015</span><hr></h4>
						<div class="tripModule row text-center">
								<img src="/public/hotel-example.jpg" class="img img-responsive tripModuleImg">
								<h4><span id="tripModuleTitle">The Holiday Inn</span></h4>
								<p>
									<span class="glyphicon glyphicon-star" aria-hidden="true"></span>
									<span class="glyphicon glyphicon-star" aria-hidden="true"></span>
									<span class="glyphicon glyphicon-star" aria-hidden="true"></span>
									<span class="glyphicon glyphicon-star" aria-hidden="true"></span>
									<span class="glyphicon glyphicon-star" aria-hidden="true"></span>
									(99 Reviews)
								</p>

								<p><em>Note:</em> Check-in begins at 5pm.</p>
						</div>
						<div class="tripModule row text-center">
								<img src="/public/hotel-example.jpg" class="img img-responsive tripModuleImg">
								<h4><span id="tripModuleTitle">The Holiday Inn</span></h4>
								<p>
									<span class="glyphicon glyphicon-star" aria-hidden="true"></span>
									<span class="glyphicon glyphicon-star" aria-hidden="true"></span>
									<span class="glyphicon glyphicon-star" aria-hidden="true"></span>
									<span class="glyphicon glyphicon-star" aria-hidden="true"></span>
									<span class="glyphicon glyphicon-star" aria-hidden="true"></span>
									(99 Reviews)
								</p>

								<p><em>Note:</em> Check-in begins at 5pm.</p>
						</div>
					</div>

					<div class="row tripDay">
						<h4><hr><span class="tripDayTitle">Sunday, January 22th 2015</span><hr></h4>
						<div class="tripModule row text-center">
							<div class="col-sm-3">
								<img src="/public/lodge-example.png" class="img img-responsive">
							</div>
							<div class="col-sm-7">
								<p><strong><span id="tripModuleTitle">The Holiday Inn</span></strong></p>
								<p>5 Stars - 96 Reviews</p>
								<p><em>Note:</em> Check-in begins at 5pm.</p>
							</div>
						</div>
					</div>					

				</div>
				<!-- SIDE END -->

				<!-- MAIN START -->
				<div id="tripBody" class="col-sm-8 col-sm-offset-4">
					<div id="tripBodyTop" class="row">
						<ul class="nav nav-pills">
							<li role="presentation" class="active"><a href="#view">Overview</a></li>
							<!-- <li role="presentation" class="active"><a href="#view">Overview</a></li> -->
							<!-- <li role="presentation"><a data-toggle="modal" href="#editTripModal">Edit Mode</a></li> -->
						</ul>	
					</div>
					<div id="tripMap" class="row">
						<img class="img img-responsive" src="/public/bigmap-example.jpg">
					</div>
				</div>
				<!-- MAIN END -->
			</div>
			<!-- BODY END -->

		</div>

		<div class="modal fade" id="editTripModal" tabindex="-1" role="dialog" aria-labelledby="editTrip" aria-hidden="true">
		  <div class="modal-dialog modal-lg">
		    <div class="modal-content">
		      <div class="modal-header">
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
		        <h4 class="modal-title" id="myModalLabel">Edit Trip</h4>
		      </div>
		      <div class="modal-body">
			      <form id="datesForm" class="form-inline">
			      	<div class="row">
			      		<div id="modalButtons" class="col-sm-2">
				      		<button type="button" id="editDates" class="btn btn-info">Edit Dates</button>
				      		<button type="button" id="saveDates" class="btn btn-success">Save Dates</button>
				      	</div>
				      	<div class="col-sm-5">
				      		<div class="form-group">
				      			<input id="startDate" type="text" class="form-control" placeholder="Modify Start" autocomplete="off">
				      		</div>
				      	</div>
				      	<div class="col-sm-5">
				      		<div class="form-group">
				      			<input id="endDate" type="text" class="form-control" placeholder="Modify End" autocomplete="off">
				      		</div>
			      		</div>
			      	</div>
			      </form>
			      <div class="row">
			      	<hr>
			      </div>
			      <div class="row">
			      	<div class="col-sm-10 col-sm-offset-1">
			      		<div id="calendar"></div>
			      	</div>
		      	</div>
		      </div>
		      <div class="modal-footer">
		        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
		        <button type="button" class="btn btn-primary">Save Trip</button>
		      </div>
		    </div>
		  </div>
		</div>

	</body>
</html>

<script type="text/javascript">

	// VARIABLE DECLARE

	var startDate = '2015-01-20'; // Same as IDs of edit form.
	var endDate 	= '2015-01-25';

	var inputClicked;

	// EDIT CALENDAR
	$('#calendar').fullCalendar({
  	dayClick: function(date, jsEvent, view) {

  		formatDate = String(date.format('dddd, MMM Do YYYY'));
  		$('#'+inputClicked).attr('placeholder', formatDate);

  		// TODO: Hidden form fields that save date formatted in YYYY-MM-DD.
  	},
  	// selectable: true,
  	// select: function(start, end, jsEvent, view) {
  	// 	console.log("Test :"+ start.format()+" "+end.format());
  	// },
  	events: [
  		{
  			title : 	'Trip Starts',
  			start : 	startDate
  		},
   		{
  			title : 	'Trip Ends',
  			start : 	endDate
  		}
  	]
 	});

	// DOCUMENT READY
	$( document ).ready(function() {

		$('#tripMap').hide();
		$('#tripMap').fadeIn('slow');

		// getItinerary();
   	// $('#calendar').fullCalendar('render');
   	$('#calendar').hide();
   	$('form .form-group').hide();
   	$('#saveDates').hide();

		console.log("Hey you be ready to go trippin'");
	});

	// EDIT TRIP MODAL
	// $('#editTripModal').on('shown.bs.modal', function () {

	// 	// $('#calendar').hide(function() {
 //  // 	 	$(this).fullCalendar('render');			
	// 	// });
	// });

	$('#editDates').on('click', function() {
		$('#calendar').slideDown(function() {
  	 	$(this).fullCalendar('render');			
		});
		$('#editDates').slideUp('fast', function() {
			$('#saveDates').slideDown('fast');
			$('form .form-group').fadeToggle();
		})
	});
	$('#saveDates').on('click', function() {
		$('#calendar').slideUp('fast');
		$('#saveDates').slideUp('fast', function() {
			$('#editDates').slideDown('fast');
			$('form .form-group').fadeToggle();
		})
	});

	$('form#datesForm input').on('focus', function() {
		console.log($(this).attr('id'));
		inputClicked = $(this).attr('id');
	});

	// $( window ).scroll(function() {
	// 	if ( $(this).scrollTop() >= 114) {
	// 		$('#sideTitle').addClass('fixed');
	// 	}
	// 	else {
	// 		$('#sideTitle').removeClass('fixed');
	// 	}
	// 	// console.log($(this).scrollTop());
	// });

	function getItinerary() {

		$.ajax({
			dataType: 'json',
			url: '/public/test/getdata.php',
			data: 'data',
			success: function(data) {

			}
		});


	}

</script>

<!-- TODO: As scroll through, highlight certain days and its events (Ie, scrolling through the trip) -->

<!-- Incase forget, for each day item, have picture stretch width, display info at bottom like wide tile, but looks good. -->